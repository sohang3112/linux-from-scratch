# Pre-Requisites

## [Installing from Source](https://moi.vonos.net/linux/beginners-installing-from-source/)

### MD5 Sum
```console
$ md5sum path/to/file       # calculate MD5 sum to verify by hand (of downloaded package)
$ md5sum --check path/to/file.md5      # read file of MD5 sums and filenames and verify them all
```

### Compression/Archives: 
- `tar` (works on all kinds), `gzip`, `bunzip2` (works on *.bz2* archives) (these 2 for more specific archives).
- **DO NOT TRUST INSTRUCTIONS USING THESE FLAGS IN `tar` (might be trying to trick you!)**:
```
-C or --directory
-P or --absolute-names
--transform or --xform 
```
- View contents before decompressing: `tar --list --file filename` (same as `tar -tf filename` or `tar tf filename`: 
  dash `-` before `tf` flag is optional).
- Zip archives *don't* preserve file permissions, etc.
- Shell Archvives *.shar* are human readable, can be decompressed using `unshar` command.

### Patching
 Occassionally people may distribute changes to software (to make it work on a platform) in the form
of patchfiles - `diff` tool shows human-readable difference, and can also "apply the patch" to get new version 
transparently. (AFAIK you actually apply the patch using `patch < path/to/patch.diff` command)

### Build Systems: Cmake, Make, configure
- `make` works on Makefiles. Makefile has most common rule in form 
  `when TARGET-FILE is older than SOURCE-FILE then SOME-ACTION`. Main action performed is to run compiler.
- Many packages come with a shell script `configure` and a template makefile `Makefile.in`. Configure script 
  takes config options (CLI params) to create final Makefile.
- `configure` script is often generated by Autotools (eg. `autoconf`), but that doesn't matter to the user.

So usually flow is (in project root directory):
```console
$ ./configure {{config_options}}       # Makefile.in template -> final Makefile
$ make                                 # compile everything in local directory
$ sudo make install                    # update global directories
```

Optionally:
- `make clean` can be run to remove all generated files.
- `make -n` flag can give preview of what make will run (without actually running it).
- more optional: `make Makefiles`, `make includes`, `make depend`
- modify compiler command in Makefile using various flags: -O2, -fomit-frame-pointer, -funroll-loops.

Some projects use Cmake instead of a configure script to generate Makefile - use it like this (replace only 
configure step, rest are same):
`cmake . -DCMAKE_BUILD_TYPE=Release {some options ...}`

Output exe of compiler often contains debug symbols - remove them with `strip` command.

`imake`, `xmkmf` utilities also used sometimes, especially in X11 libraries. `imake` operates on *Imakefile* 
(or *Imake*) (a template Makefile). But usually we would run `xmkmf -a` instead of using `imake` directly.

**TODO**: [Example Makefile](https://moi.vonos.net/linux/beginners-installing-from-source/#appendix-a-an-example-makefile)

**Troubleshooting**: [dealing with various compiler & linker errors](https://tldp.org/HOWTO/Software-Building-HOWTO-7.html)

### Documentation
"Installing" a project's docs means making it accessible to tools like `man`, `info`. Some projects provide HTML docs,
usually under */usr/share/doc/*. Docs may or may not be installed as part of `make install`.


## [Software Building TODO](https://tldp.org/HOWTO/Software-Building-HOWTO.html)
- Most distros maintain a `terminfo` database (in `/usr/share/terminfo`) of screen-oriented programs and 
terminal-related info for them (eg. escape codes). **TODO**: check more about this.
- [Various examples](https://tldp.org/HOWTO/Software-Building-HOWTO-9.html) of installing from source various programs
  and solving the errors (linker, etc.) along the way.

### Package Manager commands
- Usually RPM has pre-built binaries, but for dealing with source RPMs (equivalent to source tarballs), run
  `rpm --recompile packagename.rpm` or `rpm --rebuild packagename.rpm`.
- Check RPM signature before installing: `rpm --checksig packagename.rpm` or `rpm -K --nopgp packagename.rpm`.
  Equivalent commands for APT packages are `dpkg -I | --info packagename.deb` or `dpkg -e | --control packagename.deb`.

### Linux ELF inspection tools
- `ldd`: find all dynamic library dependencies
- `nm`: list symbol names (**TODO**: what does symbol mean here??)

### [Compatibility with a.out binaries](https://tldp.org/HOWTO/Software-Building-HOWTO-6.html)
If we just have *a.out* file, don't have source code, how to build it:
- TODO
-  kernel needs to have a.out support built into it, either directly or as a loadable module. 
   May need to rebuild the kernel to enable this.
- `strings`: list human-readable strings in the binary
